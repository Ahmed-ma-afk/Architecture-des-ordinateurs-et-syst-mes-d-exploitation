#Ahmed Maloum Mohamed
#mohamed.ahmed-maloum

irmovq $0 , %rax
irmovq $8 , %rbx
mrmovq len , %rcx
irmovq $-1 , %rdx
mrmovq result , %r8

Lloop:
  irmovq $0 , %rsi
  subq  %rsi , %rcx
  je       Lend        # if len-0 = 0, jump Lend
  mrmovq src(%rax) , %r9
  rmmovq %r9 , dest(%rax)
  xorq %r9 , %r8
  addq %rdx , %rcx
  addq %rbx , %rax
  jmp Lloop

Lend:
  rmmovq %r8 , result
  halt

.align 8
# Source block
src:
        .quad 0x00a
        .quad 0x0b0
        .quad 0xc00

# Destination block
dest:
        .quad 0x111
        .quad 0x222
        .quad 0x333

len :
        .quad 0x003

result :
        .quad 0x000
